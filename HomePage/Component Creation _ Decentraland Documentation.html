<!DOCTYPE html>
<!-- saved from url=(0093)https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/ -->
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="How to create new components for ECS7 # To create new components, we need to do a couple of things before starting coding them in the renderer. There is a step-by-step guide that you need to follow. I will list all the steps, and then you can follow each step with a longer explanation.
Create the proto definition in @dcl/protocol Generate the new proto TypeScript code in the js-sdk-toolchain Create a test for js-sdk-toolchain Generate the new proto C# code in the project Code the new component Ensure that the component follows the convention Create the proto definition in @dcl/protocol # To create a definition, you must go to this repo: https://github.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Component Creation">
<meta property="og:description" content="How to create new components for ECS7 # To create new components, we need to do a couple of things before starting coding them in the renderer. There is a step-by-step guide that you need to follow. I will list all the steps, and then you can follow each step with a longer explanation.
Create the proto definition in @dcl/protocol Generate the new proto TypeScript code in the js-sdk-toolchain Create a test for js-sdk-toolchain Generate the new proto C# code in the project Code the new component Ensure that the component follows the convention Create the proto definition in @dcl/protocol # To create a definition, you must go to this repo: https://github.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/"><meta property="og:image" content="https://docs.decentraland.org/images/og-logo.png"><meta property="article:section" content="contributor">
<meta property="article:modified_time" content="2024-04-26T15:50:40-03:00">
<title>Component Creation | Decentraland Documentation</title>
<link rel="manifest" href="https://docs.decentraland.org/manifest.json">
<link rel="icon" href="https://docs.decentraland.org/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="./Component Creation _ Decentraland Documentation_files/book.min.f4a0fa25275edf7eefd0c816f2b982b64e30ef636c0f9b489628b69493e386d8.css" integrity="sha256-9KD6JSde337v0MgW8rmCtk4w72NsD5tIlii2lJPjhtg=" crossorigin="anonymous">
<script type="text/javascript" async="" src="./Component Creation _ Decentraland Documentation_files/z0h94kay"></script><script type="text/javascript" async="" src="./Component Creation _ Decentraland Documentation_files/analytics.min.js.download"></script><script defer="" src="./Component Creation _ Decentraland Documentation_files/lunr.min.js.download"></script>
<script defer="" src="./Component Creation _ Decentraland Documentation_files/en.search.min.6b52c5e340880f4d4309bc4e386aa11630e533e615b71c3010e55438bc701f63.js.download" integrity="sha256-a1LF40CID01DCbxOOGqhFjDlM+YVtxwwEOVUOLxwH2M=" crossorigin="anonymous"></script>
<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="ZHLrnVct1IQCx7yLeOzxSic7G1Duy0HH";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("ZHLrnVct1IQCx7yLeOzxSic7G1Duy0HH");
  analytics.page();
  }}();
</script>
<script defer="" src="./Component Creation _ Decentraland Documentation_files/intercom.min.47bd2edf568b96bf76004cf88a0feac89cc3aa30d7e89a0aaf8fa0e22627387c.js.download" integrity="sha256-R70u31aLlr92AEz4ig/qyJzDqjDX6JoKr4+g4iYnOHw=" crossorigin="anonymous"></script>

</head>
<body dir="ltr">
<input type="checkbox" class="hidden toggle" id="menu-control">
<input type="checkbox" class="hidden toggle" id="toc-control">
<div class="dcl navbar fullscreen" role="navigation">
<div class="ui container">
<div class="dcl navbar-menu">
<div class="ui secondary stackable menu">
<a class="dcl navbar-logo" href="https://decentraland.org/">
<i class="dcl logo"></i>
</a>
<div class="item">
<a href="https://market.decentraland.org/" class="item">Marketplace</a>
<div class="item submenu">
<div class="ui vertical menu">
<a href="https://market.decentraland.org/" class="item">Overview</a>
<a href="https://market.decentraland.org/browse" class="item">Collectibles</a>
<a href="https://market.decentraland.org/lands" class="item">LAND</a>
<a href="https://market.decentraland.org/account" class="item">My Assets</a>
</div>
</div>
</div>
<div class="item">
<a href="https://builder.decentraland.org/" class="item">Builder</a>
<div class="item submenu">
<div class="ui vertical menu">
<a href="https://builder.decentraland.org/" class="item">Overview</a>
<a href="https://builder.decentraland.org/collections" class="item">Collections</a>
<a href="https://builder.decentraland.org/scenes" class="item">Scenes</a>
<a href="https://builder.decentraland.org/land" class="item">Land</a>
<a href="https://builder.decentraland.org/names" class="item">Names</a>
<a href="https://builder.decentraland.org/worlds" class="item">Worlds</a>
</div>
</div>
</div>
<div class="item">
<a href="https://docs.decentraland.org/" class="active item">Docs</a>
<div class="item submenu">
<div class="ui vertical menu">
<a href="https://docs.decentraland.org/player" class="item">Players</a>
<a href="https://docs.decentraland.org/creator" class="item">Content Creators</a>
<a href="https://docs.decentraland.org/contributor" class="item">Contributors</a>
<a href="https://studios.decentraland.org/" class="item">Studios</a>
</div>
</div>
</div>
<div class="item">
<a href="https://places.decentraland.org/" class="item">Places</a>
<div class="item submenu">
<div class="ui vertical menu">
<a href="https://places.decentraland.org/" class="item">Overview</a>
<a href="https://places.decentraland.org/places" class="item">Places</a>
<a href="https://places.decentraland.org/worlds" class="item">Worlds</a>
<a href="https://docs.decentraland.org/creator/places/faq" class="item">FAQ</a>
</div>
</div>
</div>
<div class="item">
<a href="https://events.decentraland.org/" class="item">Events</a>
</div>
<div class="item">
<a href="https://dao.decentraland.org/" class="item">DAO</a>
<div class="item submenu">
<div class="ui vertical menu">
<a href="https://dao.decentraland.org/" class="item">Overview</a>
<a href="https://governance.decentraland.org/" class="item">Governance</a>
<a href="https://governance.decentraland.org/transparency" class="item">Transparency</a>
</div>
</div>
</div>
<div class="item">
<a href="https://decentraland.org/blog" class="item">Blog</a>
</div>
</div>
</div>
</div>
</div>
<script>
  (function(){var e=document.querySelectorAll(".dcl.navbar .dcl.navbar-menu .ui.menu > div.item");e.forEach(e=>{e.querySelectorAll("a.item").forEach(t=>{var n=e.querySelector("a.item");t.addEventListener("click",function(e){window.analytics&&window.analytics.track("Clicked on navbar",{section:n.textContent.toLowerCase(),submenu:n.textContent!==e.target.textContent?e.target.textContent.toLowerCase():void 0})})})})})()
</script>
<div class="tabs-header">
<div class="dcl tabs ">
<div class="ui container">
<div class="dcl tab active" style="border-color: transparent">
<a aria-current="page" class="tabs-navigation" href="https://docs.decentraland.org/player">Players</a>
</div>
<div class="dcl tab active" style="border-color: transparent">
<a aria-current="page" class="tabs-navigation" href="https://docs.decentraland.org/creator">Content Creators</a>
</div>
<div class="dcl tab active">
<a aria-current="page" class="tabs-navigation" href="https://docs.decentraland.org/contributor">Contributors</a>
<div class="active-bar" style="border-color: #EE834A;"></div>
<style>
                :root {
                  --primary: #EE834A;
                }
              </style>
</div>
<div class="book-search">
<div id="search-overlay" class="hidden"></div>
<div id="book-search-input">
<img src="./Component Creation _ Decentraland Documentation_files/search.svg" class="book-icon" alt="Search">
<input type="text" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/">
</div>
<div class="book-search-spinner hidden"></div>
<div id="book-search-results">
<div id="book-search-hits" class="hidden" tabindex="0">
<ul id="book-search-list"></ul>
</div>
</div>
</div>
</div>
</div>
</div>
<main class="container flex">
<aside class="book-menu sidebar">
<div class="book-menu-content">
<nav>
<ul>
<li>
<span>Introduction</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/introduction/welcome/" class="">Welcome!</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/introduction/architecture/" class="">Architecture</a>
</li>
</ul>
</li>
<li>
<span>Identity</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/auth/authchain/" class="">Authentication Chain</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/auth/signed-fetch/" class="">Signed Fetch</a>
</li>
</ul>
</li>
<li>
<span>Content</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/content/overview/" class="">Overview</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/filesystem/" class="">File System</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/entities/" class="">Entities</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/pointers/" class="">Pointers</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/snapshots/" class="">Snapshots</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/collections/" class="">Collections</a>
</li>
<li>
<input type="checkbox" id="section-78d857344d9976cb2d2de1aa922ff1d0" class="toggle">
<label for="section-78d857344d9976cb2d2de1aa922ff1d0" class="flex justify-between">
<a role="button" class="">Entity Types</a>
</label>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/content/entity-types/scenes/" class="">Scenes</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/entities-types/outfits/" class="">Outfits</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/entities-types/profiles/" class="">Profiles</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/entity-types/wearables/" class="">Wearables</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/entity-types/emotes/" class="">Emotes</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/entity-types/stores/" class="">Stores</a>
</li>
</ul>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/content/practice/" class="">Practice</a>
<ul>
</ul>
</li>
</ul>
</li>
<li>
<span>Scene Runtime</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/overview/" class="">Overview</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/globals/" class="">Globals</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/execution/" class="">Execution</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/permissions/" class="">Permissions</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/entities/" class="">Basic Entities</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/components/" class="">Basic Components</a>
</li>
<li>
<input type="checkbox" id="section-10168aa810fc3bbfe8a69b8fd3fa7a80" class="toggle">
<label for="section-10168aa810fc3bbfe8a69b8fd3fa7a80" class="flex justify-between">
<a role="button" class="">Modules</a>
</label>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/modules/engine_api/" class="">EngineApi</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/modules/restricted_actions/" class="">RestrictedActions</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/modules/user_identity/" class="">UserIdentity</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/runtime/modules/signed_fetch/" class="">SignedFetch</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<span>Communications</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/comms/overview/" class="">Overview</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/main/" class="">MAIN Realm</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/archipelago/" class="">Archipelago</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/messages/" class="">Messages</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/transports/" class="">Transports</a>
</li>
<li>
<input type="checkbox" id="section-fd25a60f0b8f77e70711dd8d5ea6ec37" class="toggle">
<label for="section-fd25a60f0b8f77e70711dd8d5ea6ec37" class="flex justify-between">
<a role="button" class="">Transport Types</a>
</label>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/comms/transport-types/livekit/" class="">LiveKit</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/transport-types/websocket/" class="">Websocket</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/transport-types/signed-login/" class="">Signed Login</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/transport-types/offline/" class="">Offline</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/comms/transport-types/simulator/" class="">Simulator</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<span>Catalyst Nodes</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/catalyst/glossary/" class="">Glossary</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/catalyst/realm-selection/" class="">Realm Selection</a>
</li>
</ul>
</li>
<li>
<span>Explorer Renderer</span>
<ul>
<li>
<input type="checkbox" id="section-b9181de4c3c755fb3fc9f6afcd6fedde" class="toggle" checked="">
<label for="section-b9181de4c3c755fb3fc9f6afcd6fedde" class="flex justify-between">
<a role="button" class="">Components</a>
</label>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/" class="active">Component Creation</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<span>Social Service</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/social-service/overview/" class="">Overview</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/social-service/js-client/" class="">Javascript Client</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/social-service/login/" class="">Login</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/social-service/get-friends/" class="">Get friendships</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/social-service/put-friends/" class="">Act on events and users</a>
</li>
</ul>
</li>
<li>
<span>Tutorials</span>
<ul>
<li>
<a href="https://docs.decentraland.org/contributor/tutorials/how-to-create-new-entity-type/" class="">New entity type</a>
</li>
<li>
<a href="https://docs.decentraland.org/contributor/tutorials/how-to-run-a-catalyst/" class="">Run a Catalyst Node</a>
</li>
</ul>
</li>
</ul>
</nav>
<script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class="book-page">
<header class="book-header">
<div class="flex align-center justify-between">
<label for="menu-control">
<img src="./Component Creation _ Decentraland Documentation_files/menu.svg" class="book-icon" alt="Menu">
</label>
<strong>Component Creation</strong>
<label for="toc-control">
</label>
</div>
</header>
<article class="markdown">
<h1>Component Creation</h1><h1 id="how-to-create-new-components-for-ecs7">
How to create new components for ECS7
<a class="anchor" href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/#how-to-create-new-components-for-ecs7">#</a>
</h1>
<p>To create new components, we need to do a couple of things before starting coding them in the renderer.
There is a step-by-step guide that you need to follow. I will list all the steps, and then you can follow each step with a longer explanation.</p>
<ol>
<li>Create the proto definition in <a href="https://github.com/decentraland/protocol" target="_blank">
@dcl/protocol
</a></li>
<li>Generate the new proto TypeScript code in the <a href="https://github.com/decentraland/js-sdk-toolchain" target="_blank">
js-sdk-toolchain
</a></li>
<li>Create a test for <code>js-sdk-toolchain</code></li>
<li>Generate the new proto C# code in the project</li>
<li>Code the new component</li>
<li>Ensure that the component follows the convention</li>
</ol>
<h2 id="create-the-proto-definition-in-dclprotocolhttpsgithubcomdecentralandprotocol">
Create the proto definition in <a href="https://github.com/decentraland/protocol" target="_blank">
@dcl/protocol
</a>
<a class="anchor" href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/#create-the-proto-definition-in-dclprotocolhttpsgithubcomdecentralandprotocol">#</a>
</h2>
<p>To create a definition, you must go to this repo: <a href="https://github.com/decentraland/protocol" target="_blank">
https://github.com/decentraland/protocol
</a></p>
<ol>
<li>Create the proto definition in this folder: <a href="https://github.com/decentraland/protocol/tree/main/ecs/components" target="_blank">
https://github.com/decentraland/protocol/tree/main/ecs/components
</a></li>
<li>Create a PR with the news changes</li>
</ol>
<blockquote>
<p><strong><em>NOTE:</em></strong> After creating the PR, a GitHub Bot will comment with the package link to test the PR. You can use that link for testing in the following steps</p>
</blockquote>
<p>Things to take into account</p>
<ul>
<li>We are using proto 3, so all the definition of the proto must compile with their <a href="https://developers.google.com/protocol-buffers/docs/proto3/" target="_blank">
syntax
</a></li>
<li>We have some common types that cannot be recreated</li>
<li>The proto should have the basic definition</li>
<li>You must add the following code to enumerate the component</li>
</ul>
<pre tabindex="0"><code>import "common/id.proto";
option (ecs_component_id) = 1100;
</code></pre><p>Example of .proto</p>
<pre tabindex="0"><code>syntax = "proto3";

import "common/id.proto";
option (ecs_component_id) = 1020;

message PBAudioSource {
  optional bool playing = 1;
  optional float volume = 2; // default=1.0f
  optional bool loop = 3;
  optional float pitch = 4; // default=1.0f
  string audio_clip_url = 5;
}
</code></pre><h2 id="generate-the-new-proto-typescript-code-in-the-js-sdk-toolchainhttpsgithubcomdecentralandjs-sdk-toolchain">
Generate the new proto TypeScript code in the <a href="https://github.com/decentraland/js-sdk-toolchain" target="_blank">
js-sdk-toolchain
</a>
<a class="anchor" href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/#generate-the-new-proto-typescript-code-in-the-js-sdk-toolchainhttpsgithubcomdecentralandjs-sdk-toolchain">#</a>
</h2>
<p>Download the following repo: <a href="https://github.com/decentraland/js-sdk-toolchain" target="_blank">
https://github.com/decentraland/js-sdk-toolchain
</a></p>
<p>Inside it, navigate to <code>packages/dcl/ecs</code> (<code>https://github.com/decentraland/js-sdk-toolchain/tree/main/packages/%40dcl/ecs</code>)</p>
<p>And there, you can execute</p>
<pre tabindex="0"><code>npm install @dcl/protocol@next
</code></pre><p>Or the command generated by the GitHub Bot in your @dcl/protocol PR (this must be temporal for testing the PR’s).</p>
<p>Then run the following commands at the root of the <code>js-sdk-toolchain</code> project:</p>
<pre tabindex="0"><code>make install
make build
</code></pre><p>And push the generated code.</p>
<h2 id="generate-the-new-proto-c-code-in-the-project">
Generate the new proto C# code in the project
<a class="anchor" href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/#generate-the-new-proto-c-code-in-the-project">#</a>
</h2>
<p>To generate the C# code, we need to go to the <code>protocol-gen</code> path in the root of the <code>@decentraland/unity-renderer</code> repository. And execute the following commands:</p>
<pre tabindex="0"><code>npm install
npm run build-components
</code></pre><p>To upgrade to the latest version of the <code>@dcl/protocol</code> (main branch), we should update using</p>
<pre tabindex="0"><code>npm install @dcl/protocol@next
npm run build-components
</code></pre><p>To test a PR, we can use a URL generated by the GitHub Bot in the <code>@dcl/protocol</code> PR:
Example:</p>
<pre tabindex="0"><code>npm install "https://sdk-team-cdn.decentraland.org/@dcl/protocol/branch//dcl-protocol-1.0.0-3143233696.commit-45f1290.tgz"
npm run build-components
</code></pre><p>After merging @dcl/protocol PR, we must use the <code>@dcl/protocol@next</code> and generate the code.</p>
<h2 id="code-the-new-component">
Code the new component
<a class="anchor" href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/#code-the-new-component">#</a>
</h2>
<p>Now it is time to implement the functionality of the new component.</p>
<p>The components have five essential parts.</p>
<ul>
<li>
<p>ComponentID
The ID that the component will use. It must be unique and generated from the proto definition</p>
</li>
<li>
<p>Model
This is the model of the component. This is the data that we will use to handle the component. It has been auto-generated with the proto generation and it has the same name of the proto file with a PB in front. For example, if you have a <code>BoxShape.proto</code> definition the generated class of the model will be <code>PBBoxShape</code></p>
</li>
<li>
<p>Component Handler
The component handler will manage all the functionality of the component. In this class you must implement the <code>IECSComponentHandler&lt;ModelClass&gt;</code> (ModelClass is the model. It is a generated class from the proto, the name will be PB + name of the file .proto).
This interface has 3 method that are important to implement in order to create a component</p>
</li>
</ul>
<pre tabindex="0"><code>        void OnComponentCreated(IParcelScene scene, IDCLEntity entity);
        void OnComponentRemoved(IParcelScene scene, IDCLEntity entity);
        void OnComponentModelUpdated(IParcelScene scene, IDCLEntity entity, ModelType model);
</code></pre><ul>
<li>Serializer
Each component is responsible to implement his serialization and deserialization of the component. This serializer must be able to serialize/deserialize to byte array</li>
<li>Register
This will register the component into the system, connecting it to the system. This register will register the component in the factory and the component writer</li>
</ul>
<p>The design of the components is to avoid inheritance so we encourage to use pure functions as much as possible</p>
<p>In order to create them, We must follow the next steps</p>
<ol>
<li>Create the component folder and assembly. We have all the components unders the follow folder <code>DCLPlugins/ECS7/ECSComponents</code>.
You need to create a folder and a new assembly that will hold the component</li>
<li>In the new assembly, you must reference the following one <code>DCL.ECSComponents.Data</code>. This will reference the new model of the component that you just updated</li>
<li>You must create the component handler with all the logic (Take a look at <code>ECSBoxShapeComponentHandler.cs</code> as an example)</li>
<li>You must create the serializer class (probably you can copy it from another class and adapt to your)</li>
<li>You must create the register class</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">   public static class AudioSourceSerializer
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        public static byte<span class="o">[]</span> Serialize<span class="o">(</span>PBAudioSource model<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">{</span>
</span></span><span class="line"><span class="cl">            int <span class="nv">size</span> <span class="o">=</span> model.CalculateSize<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            byte<span class="o">[]</span> <span class="nv">buffer</span> <span class="o">=</span> new byte<span class="o">[</span>size<span class="o">]</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            CodedOutputStream <span class="nv">output</span> <span class="o">=</span> new CodedOutputStream<span class="o">(</span>buffer<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            model.WriteTo<span class="o">(</span>output<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> buffer<span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        public static PBAudioSource Deserialize<span class="o">(</span>object data<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> PBAudioSource.Parser.ParseFrom<span class="o">((</span>byte<span class="o">[])</span>data<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><ol start="6">
<li>Add the new register to the <code>ECS7ComponentsComposer</code> class with his corresponding ID</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">   public class ECS7ComponentsComposer : IDisposable
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> TransformRegister transformRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> SphereShapeRegister sphereShapeRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> BoxShapeRegister boxShapeRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> PlaneShapeRegister planeShapeRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> CylinderShapeRegister cylinderShapeRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> AudioStreamRegister audioStreamRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">        private <span class="nb">readonly</span> AudioSourceRegister audioSourceRegister<span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        public ECS7ComponentsComposer<span class="o">(</span>ECSComponentsFactory componentsFactory, IECSComponentWriter componentsWriter<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">transformRegister</span> <span class="o">=</span> new TransformRegister<span class="o">(</span>ComponentID.TRANSFORM, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">sphereShapeRegister</span> <span class="o">=</span> new SphereShapeRegister<span class="o">(</span>ComponentID.SPHERE_SHAPE, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">boxShapeRegister</span> <span class="o">=</span> new BoxShapeRegister<span class="o">(</span>ComponentID.BOX_SHAPE, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">planeShapeRegister</span> <span class="o">=</span> new PlaneShapeRegister<span class="o">(</span>ComponentID.PLANE_SHAPE, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">cylinderShapeRegister</span> <span class="o">=</span> new CylinderShapeRegister<span class="o">(</span>ComponentID.CYLINDER_SHAPE, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">audioStreamRegister</span> <span class="o">=</span> new AudioStreamRegister<span class="o">(</span>ComponentID.AUDIO_STREAM, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">audioSourceRegister</span> <span class="o">=</span> new AudioSourceRegister<span class="o">(</span>ComponentID.AUDIO_SOURCE, componentsFactory, componentsWriter<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        public void Dispose<span class="o">()</span>
</span></span><span class="line"><span class="cl">        <span class="o">{</span>
</span></span><span class="line"><span class="cl">            transformRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            sphereShapeRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            boxShapeRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            planeShapeRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            cylinderShapeRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            audioStreamRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            audioSourceRegister.Dispose<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>And now you have your component added and working!</p>
<h2 id="ensure-that-the-component-follows-the-convention">
Ensure that the component follows the convention
<a class="anchor" href="https://docs.decentraland.org/contributor/unity-renderer/components/how-to-create-components/#ensure-that-the-component-follows-the-convention">#</a>
</h2>
<p>There is some checklist that we need to have into account while developing new components, this part tries to summarize them.</p>
<ul>
<li>Unit test
All the components must include unit test that cover its functionality, dispose and the serialization/deserialization at least to ensure that the component will work</li>
<li>Take into account what happens when the component is not inside the scene (Check <code>SceneBoundariesChecker</code> class for more info)</li>
<li>If the component renders something into the world, It must add the rendereable info to the data store, this way we add the information of the renderer to the scene so it can counts toward the limit</li>
<li>If the component renders something into the world, It must add the <code>MeshesInfo</code> to the entity</li>
<li>It must be as perfomant as possible. This code will be executed lots of time so we need to ensure that everything work as smooth as possible</li>
<li>It must work with <code>Hot reload</code> in the preview mode. If you has coded the <code>OnComponentRemoved</code> correctly, this will work out of the box, but the hot reload it a way to test that everything work fine with the dispose of the component</li>
<li>If the component uses a resource, you must implement the resource management with an <code>AssetPromiseKeeper</code>. The component should notify the <code>AssetPromiseKeeper</code> when the resource is used and when it is not longer used</li>
</ul>
</article>
<footer class="book-footer">
<div class="flex flex-wrap justify-between">
<div><a class="flex align-center" href="https://github.com/decentraland/documentation/commit/86dbc267b62c3ff66b32b916ace28b735033bc59" title="Last modified by Gabriel Díaz | April 26, 2024" target="_blank" rel="noopener">
<img src="./Component Creation _ Decentraland Documentation_files/calendar.svg" class="book-icon" alt="Calendar">
<span>April 26, 2024</span>
</a>
</div>
<div>
<a class="flex align-center" href="https://github.com/decentraland/documentation/edit/main/content/contributor/explorer-renderer/components/components.md" target="_blank" rel="noopener">
<img src="./Component Creation _ Decentraland Documentation_files/edit.svg" class="book-icon" alt="Edit">
<span>Edit this page</span>
</a>
</div>
</div>
<script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>
</footer>
<label for="menu-control" class="hidden book-menu-overlay"></label>
</div>
</main>
<div class="ui container dcl footer">
<div class="main-footer">
<div role="listbox" aria-expanded="false" class="ui upward dropdown dcl language-dropdown" tabindex="0">
<div aria-atomic="true" aria-live="polite" role="alert" class="divider text">
<div class="dcl language-icon-wrapper">
<i class="dcl language-icon en"> </i>
<div class="language-icon-label">English</div>
</div>
</div>
</div>
<div class="links">
<a href="https://decentraland.org/">Home</a>
<a href="https://decentraland.org/privacy">Privacy Policy</a>
<a href="https://decentraland.org/terms">Terms of Use</a>
<a href="https://decentraland.org/content">Content Policy</a>
<a href="https://decentraland.org/ethics">Code of Ethics</a>
</div>
</div>
<div class="secondary-footer">
<div class="social-links">
<a href="https://dcl.gg/discord">
<i class="social-icon discord"></i>
</a>
<a href="https://reddit.com/r/decentraland">
<i class="social-icon reddit"></i>
</a>
<a href="https://github.com/decentraland">
<i class="social-icon github"></i>
</a>
<a href="https://twitter.com/decentraland">
<i class="social-icon twitter"></i>
</a>
</div>
<div class="copyright">© 2023 Decentraland</div>
</div>
</div>
<script defer="" src="./Component Creation _ Decentraland Documentation_files/beacon.min.js.download" data-cf-beacon="{&quot;token&quot;: &quot;ef470b4862c74992aaa278b7c4d4c969&quot;}"></script>

<iframe id="intercom-frame" style="position: absolute !important; opacity: 0 !important; width: 1px !important; height: 1px !important; top: 0 !important; left: 0 !important; border: none !important; display: block !important; z-index: -1 !important; pointer-events: none;" aria-hidden="true" tabindex="-1" title="Intercom" src="./Component Creation _ Decentraland Documentation_files/saved_resource.html"></iframe><div class="intercom-lightweight-app"><div class="intercom-lightweight-app-launcher intercom-launcher" role="button" tabindex="0" aria-label="Open Intercom Messenger" aria-live="polite"><div class="intercom-lightweight-app-launcher-icon intercom-lightweight-app-launcher-icon-open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 32"><path d="M28 32s-4.714-1.855-8.527-3.34H3.437C1.54 28.66 0 27.026 0 25.013V3.644C0 1.633 1.54 0 3.437 0h21.125c1.898 0 3.437 1.632 3.437 3.645v18.404H28V32zm-4.139-11.982a.88.88 0 00-1.292-.105c-.03.026-3.015 2.681-8.57 2.681-5.486 0-8.517-2.636-8.571-2.684a.88.88 0 00-1.29.107 1.01 1.01 0 00-.219.708.992.992 0 00.318.664c.142.128 3.537 3.15 9.762 3.15 6.226 0 9.621-3.022 9.763-3.15a.992.992 0 00.317-.664 1.01 1.01 0 00-.218-.707z"></path></svg></div><div class="intercom-lightweight-app-launcher-icon intercom-lightweight-app-launcher-icon-minimize"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z" fill="white"></path>
</svg>
</div></div><style id="intercom-lightweight-app-style" type="text/css">
  @keyframes intercom-lightweight-app-launcher {
    from {
      opacity: 0;
      transform: scale(0.5);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes intercom-lightweight-app-gradient {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes intercom-lightweight-app-messenger {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    40% {
      opacity: 1;
    }
    100% {
      transform: scale(1);
    }
  }

  .intercom-lightweight-app {
    position: fixed;
    z-index: 2147483001;
    width: 0;
    height: 0;
    font-family: intercom-font, "Helvetica Neue", "Apple Color Emoji", Helvetica, Arial, sans-serif;
  }

  .intercom-lightweight-app-gradient {
    position: fixed;
    z-index: 2147483002;
    width: 500px;
    height: 500px;
    bottom: 0;
    right: 0;
    pointer-events: none;
    background: radial-gradient(
      ellipse at bottom right,
      rgba(29, 39, 54, 0.16) 0%,
      rgba(29, 39, 54, 0) 72%);
    animation: intercom-lightweight-app-gradient 200ms ease-out;
  }

  .intercom-lightweight-app-launcher {
    position: fixed;
    z-index: 2147483003;
    padding: 0 !important;
    margin: 0 !important;
    border: none;
    bottom: 20px;
    right: 20px;
    max-width: 48px;
    width: 48px;
    max-height: 48px;
    height: 48px;
    border-radius: 50%;
    background: #FF2D55;
    cursor: pointer;
    box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.06), 0 2px 32px 0 rgba(0, 0, 0, 0.16);
    transition: transform 167ms cubic-bezier(0.33, 0.00, 0.00, 1.00);
    box-sizing: content-box;
  }


  .intercom-lightweight-app-launcher:hover {
    transition: transform 250ms cubic-bezier(0.33, 0.00, 0.00, 1.00);
    transform: scale(1.1)
  }

  .intercom-lightweight-app-launcher:active {
    transform: scale(0.85);
    transition: transform 134ms cubic-bezier(0.45, 0, 0.2, 1);
  }


  .intercom-lightweight-app-launcher:focus {
    outline: none;

    
  }

  .intercom-lightweight-app-launcher-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 48px;
    height: 48px;
    transition: transform 100ms linear, opacity 80ms linear;
  }

  .intercom-lightweight-app-launcher-icon-open {
    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-open svg {
    width: 24px;
    height: 24px;
  }

  .intercom-lightweight-app-launcher-icon-open svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-launcher-icon-self-serve {
    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-self-serve svg {
    height: 44px;
  }

  .intercom-lightweight-app-launcher-icon-self-serve svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-launcher-custom-icon-open {
    max-height: 24px;
    max-width: 24px;

    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-minimize {
    
        opacity: 0;
        transform: rotate(-60deg) scale(0);
      
  }

  .intercom-lightweight-app-launcher-icon-minimize svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-messenger {
    position: fixed;
    z-index: 2147483003;
    overflow: hidden;
    background-color: white;
    animation: intercom-lightweight-app-messenger 250ms cubic-bezier(0, 1, 1, 1);
    transform-origin: bottom right;

    
        width: 400px;
        height: calc(100% - 104px);
        max-height: 704px;
        min-height: 250px;
        right: 20px;
        bottom: 84px;
        box-shadow: 0 5px 40px rgba(0,0,0,0.16);
      

    border-radius: 16px;
  }

  .intercom-lightweight-app-messenger-header {
    height: 64px;
    border-bottom: none;
    background: #FF2D55

    
  }

  .intercom-lightweight-app-messenger-footer{
    position:absolute;
    bottom:0;
    width: 100%;
    height: 80px;
    background: #fff;
    font-size: 14px;
    line-height: 21px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: 0px 0px 25px rgba(0, 0, 0, 0.05);
    
  }

  @media print {
    .intercom-lightweight-app {
      display: none;
    }
  }
</style></div></body></html>