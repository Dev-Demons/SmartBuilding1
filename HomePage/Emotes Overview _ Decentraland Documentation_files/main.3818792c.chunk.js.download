(this["webpackJsonp@dcl/wearable-preview"]=this["webpackJsonp@dcl/wearable-preview"]||[]).push([[0],{347:function(e){e.exports=JSON.parse('{"NFT_SERVER_URL":"https://nft-api.decentraland.zone","PEER_URL":"https://peer.decentraland.zone","NETWORK":"mumbai"}')},348:function(e){e.exports=JSON.parse('{"NFT_SERVER_URL":"https://nft-api.decentraland.org","PEER_URL":"https://peer.decentraland.org","NETWORK":"matic"}')},349:function(e){e.exports=JSON.parse('{"NFT_SERVER_URL":"https://nft-api.decentraland.org","PEER_URL":"https://peer.decentraland.org","NETWORK":"matic"}')},358:function(e,t,n){},540:function(e,t){},546:function(e,t,n){"use strict";n.r(t),t.default="float angleY = 3.14 / 2.0;\n\nmat3 rotateY = mat3(\n  cos(angleY), 0, sin(angleY),\n  0, 1, 0,\n  -sin(angleY), 0, cos(angleY)\n);\n\n// view angle DOT normal of the position\nvec3 tray = normalize(viewDirectionW * rotateY);\nvec3 rayDirection = normalize(tray-vPositionW);\nfloat t=(dot(normalW,rayDirection) + 1.0) / 2.0;\n\nfloat ToonThresholds[3];\nToonThresholds[0] = 0.90;\nToonThresholds[1] = 0.80;\nToonThresholds[2] = 0.20;\n\nfloat ToonBrightnessLevels[4];\nToonBrightnessLevels[0] = 1.2;\nToonBrightnessLevels[1] = 1.0;\nToonBrightnessLevels[2] = 1.0;\nToonBrightnessLevels[3] = 0.8;\n\nif (t > ToonThresholds[0])\n{\n  finalColor.rgb *= ToonBrightnessLevels[0];\n}\nelse if (t > ToonThresholds[1])\n{\n  finalColor.rgb *= ToonBrightnessLevels[1];\n}\nelse if (t > ToonThresholds[2])\n{\n  finalColor.rgb *= ToonBrightnessLevels[2];\n}\nelse\n{\n  finalColor.rgb *= ToonBrightnessLevels[3];\n}\n"},547:function(e,t,n){},549:function(e,t,n){"use strict";n.r(t);var a=n(52),r=n.n(a),o=n(346),i=n.n(o),c=(n(358),n(48)),s=n(260),u=n.n(s),l=n(15);var f,d=n(63),p=n(86),h=n(26),b=n.n(h),v=n(67),m=n(37),y=n(193),w=n(212),g=n(347),E=n(348),O=n(349),j=Object(w.createConfig)((f={},Object(y.a)(f,w.Env.DEVELOPMENT,g),Object(y.a)(f,w.Env.STAGING,E),Object(y.a)(f,w.Env.PRODUCTION,O),f)),A=n(189),k=n(255);function T(e){return S.apply(this,arguments)}function S(){return(S=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return P.apply(this,arguments)}function P(){return P=Object(m.a)(b.a.mark((function e(t){var n,a,r,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a=o.length>2&&void 0!==o[2]?o[2]:3,e.prev=2,e.next=5,fetch(t,n);case 5:if((r=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,r.text();case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.abrupt("return",r.json());case 15:if(e.prev=15,e.t2=e.catch(2),!(a>0)){e.next=23;break}return e.next=20,T(100);case 20:return e.abrupt("return",x(t,n,a-1));case 23:throw e.t2;case 24:case"end":return e.stop()}}),e,null,[[2,15]])}))),P.apply(this,arguments)}var C=function(){function e(){Object(A.a)(this,e)}return Object(k.a)(e,[{key:"fetchItem",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n,a){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("".concat(a,"/v1/items?contractAddress=").concat(t,"&itemId=").concat(n));case 2:if(r=e.sent,0!==(o=r.data).length){e.next=6;break}throw new Error('Item not found for contractAddress="'.concat(t,'" itemId="').concat(n,'"'));case 6:return e.abrupt("return",o[0]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"fetchNFT",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n,a){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("".concat(a,"/v1/nfts?contractAddress=").concat(t,"&tokenId=").concat(n));case 2:if(r=e.sent,0!==(o=r.data).length){e.next=6;break}throw new Error('NFT not found for contractAddress="'.concat(t,'" tokenId="').concat(n,'"'));case 6:return e.abrupt("return",o[0].nft);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),R=new C,L=n(350),B=n(352),I=n(353),M=n(257);function N(e){return!!e&&"emoteDataADR74"in e}var _=function(e){Object(L.a)(n,e);var t=Object(B.a)(n);function n(){return Object(A.a)(this,n),t.call(this,"Invalid emote")}return n}(Object(I.a)(Error));function W(){return{getLength:function(){throw new _},isPlaying:function(){throw new _},goTo:function(){throw new _},play:function(){throw new _},pause:function(){throw new _},stop:function(){throw new _},enableSound:function(){throw new _},disableSound:function(){throw new _},hasSound:function(){throw new _},events:Object(M.a)()}}function D(e,t){return e.find((function(e){return e.data.category===t}))||null}function U(){return[l.WearableCategory.EYEBROWS,l.WearableCategory.MOUTH,l.WearableCategory.EYES]}function F(){return[l.WearableCategory.HAIR,l.WearableCategory.UPPER_BODY,l.WearableCategory.LOWER_BODY,l.WearableCategory.FEET]}function Y(){return[l.WearableCategory.EYEBROWS,l.WearableCategory.MOUTH,l.WearableCategory.EYES,l.WearableCategory.HAIR,l.WearableCategory.UPPER_BODY,l.WearableCategory.LOWER_BODY,l.WearableCategory.FEET]}function V(e,t){switch(e){case l.WearableCategory.EYEBROWS:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:eyebrows_00":"urn:decentraland:off-chain:base-avatars:f_eyebrows_00";case l.WearableCategory.MOUTH:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:mouth_00":"urn:decentraland:off-chain:base-avatars:f_mouth_00";case l.WearableCategory.EYES:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:eyes_00":"urn:decentraland:off-chain:base-avatars:f_eyes_00";case l.WearableCategory.HAIR:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:casual_hair_01":"urn:decentraland:off-chain:base-avatars:standard_hair";case l.WearableCategory.UPPER_BODY:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:green_hoodie":"urn:decentraland:off-chain:base-avatars:f_sweater";case l.WearableCategory.LOWER_BODY:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:brown_pants":"urn:decentraland:off-chain:base-avatars:f_jeans";case l.WearableCategory.FEET:return t===l.BodyShape.MALE?"urn:decentraland:off-chain:base-avatars:sneakers":"urn:decentraland:off-chain:base-avatars:bun_shoes";default:throw new Error('There is no default wearable for category="'.concat(e,'"'))}}function H(e){return!!e&&"data"in e&&!N(e)}function G(e){var t=[l.BodyShape.MALE,l.BodyShape.FEMALE];return t.find((function(t){return e.data.representations.some((function(e){return e.bodyShapes.includes(t)}))}))||t[0]}function z(e,t,n){return t.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{contents:t.contents.map((function(t){return{key:t,url:"".concat(n,"/content/contents/").concat(e.content.find((function(e){return e.file===t})).hash)}}))})}))}function Z(e,t){var n=e.metadata,a="".concat(t,"/lambdas/collections/contents/").concat(e.metadata.id);return"emoteDataADR74"in n?Object(v.a)(Object(v.a)({},n),{},{thumbnail:"".concat(a,"/thumbnail"),image:"".concat(a,"/image"),emoteDataADR74:Object(v.a)(Object(v.a)({},n.emoteDataADR74),{},{representations:z(e,n.emoteDataADR74.representations,t)})}):Object(v.a)(Object(v.a)({},n),{},{thumbnail:"".concat(a,"/thumbnail"),image:"".concat(a,"/image"),data:Object(v.a)(Object(v.a)({},n.data),{},{representations:z(e,n.data.representations,t)})})}var X=function(){function e(){Object(A.a)(this,e)}return Object(k.a)(e,[{key:"fetchEntities",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,x("".concat(n,"/content/entities/active"),{method:"post",body:JSON.stringify({pointers:t}),headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchItems",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n){var a,r,o,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[[],[]]);case 2:return a=t.map((function(e){return e.toLowerCase()})),e.next=5,this.fetchEntities(a,n);case 5:return r=e.sent,o=r.map((function(e){return Z(e,n)})),i=o.filter(H),c=o.filter(N),e.abrupt("return",[i,c]);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProfile",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat(n,"/lambdas/profiles/").concat(t));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error("There was an error loading the profile",e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),K=new X;var J=n(33);function q(e){return e.startsWith("#")?e:"#"+e}function Q(e){return("0"+(255*e|0).toString(16)).slice(-2)}function $(e){return Q(e.r)+Q(e.g)+Q(e.b)}function ee(e){var t=function(e){return e.startsWith("#")?e.slice(1):e}(e);return new J.Color3(parseInt(t.slice(0,2),16)/256,parseInt(t.slice(2,4),16)/256,parseInt(t.slice(4,6),16)/256)}function te(e,t){return e.bodyShapes.includes(t)}function ne(e){return te(e,l.BodyShape.MALE)}function ae(e){return te(e,l.BodyShape.FEMALE)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BodyShape.MALE,n=e.emoteDataADR74.representations.find((function(e){return e.bodyShapes.includes(t)}));if(!n)throw new Error("Could not find a representation of bodyShape=".concat(t,' for emote="').concat(e.id,'"'));return n}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BodyShape.MALE;switch(t){case l.BodyShape.FEMALE:var n=e.data.representations.find(ae);if(!n)throw new Error('Could not find a BaseFemale representation for wearable="'.concat(e.id,'"'));return n;case l.BodyShape.MALE:var a=e.data.representations.find(ne);if(!a)throw new Error('Could not find a BaseMale representation for wearable="'.concat(e.id,'"'));return a}}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BodyShape.MALE;if(ce(e,t))return oe(e,t);if(e.data.representations.length>0)return e.data.representations[0];throw new Error('The wearable="'.concat(e.id,'" has no representation'))}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BodyShape.MALE;try{return oe(e,t),!0}catch(n){return!1}}function se(e){var t=e.contents.find((function(t){return t.key===e.mainFile}));if(!t)throw new Error("Could not find main file");return t.url}function ue(e){return e.mainFile.endsWith("png")}function le(e){return 1.7999999999999998*(Math.min(Math.max(e,0),100)/100)+1}function fe(e){var t=e?parseFloat(e):null;return null===t||isNaN(t)?null:t}function de(e){switch(e&&N(e)?null:null===e||void 0===e?void 0:e.data.category){case l.WearableCategory.UPPER_BODY:return 2;case l.WearableCategory.SKIN:return 1.75;default:return 1.25}}var pe="default";function he(e){var t=e.lastIndexOf(":");return-1!==t&&e.split(":").length>6?{assetUrn:e.substring(0,t),tokenId:e.substring(t+1)}:{assetUrn:e,tokenId:void 0}}function be(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(m.a)(b.a.mark((function e(t,n){var a,r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe([t],n);case 2:if(a=e.sent,r=Object(c.a)(a,2),o=r[0],i=r[1],1!==o.length){e.next=8;break}return e.abrupt("return",o[0]);case 8:if(1!==i.length){e.next=10;break}return e.abrupt("return",i[0]);case 10:throw new Error('Could not find wearable or emote for urn="'.concat(t,'"'));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){var t=e.map((function(e){return JSON.parse(atob(e))}));return[t.filter(H),t.filter(N)]}function ye(e){return"number"===typeof e&&!isNaN(e)}function we(e){return e?e===pe?e:e.startsWith(pe)?isNaN(Number(e.replace(pe,"")))?null:e:/^0x[a-fA-F0-9]{40}$/g.test(e)?e:null:null}function ge(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(m.a)(b.a.mark((function e(t,n){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Oe(t.avatar.wearables,n);case 4:return a=e.sent,r=Object(c.a)(a,1),o=r[0],e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t){return je.apply(this,arguments)}function je(){return(je=Object(m.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[[],[]]);case 2:return a=t.map((function(e){return e.replace(/^dcl:\/\/base-avatars\//,"urn:decentraland:off-chain:base-avatars:")})).map((function(e){return he(e).assetUrn})),e.abrupt("return",K.fetchItems(a,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(m.a)(b.a.mark((function e(t){var n,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[[],[]]);case 2:return n=t.map((function(e){return fetch(e).then((function(e){return e.json()})).catch()})),e.next=5,Promise.all(n);case 5:return a=e.sent,r=a.filter(H),o=a.filter(N),e.abrupt("return",[r,o]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=function(){var e={};return{memo:function(){var t=Object(m.a)(b.a.mark((function t(n,a){var r,o,i,c=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n in e)){for(r=c.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=c[i];e[n]=a.apply(void 0,o)}return t.abrupt("return",e[n]);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),reset:function(){for(var t in e)delete e[t]}}}();function Se(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(m.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te.memo(t,Object(m.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==pe){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,K.fetchProfile(t,n).then((function(e){return e&&e.avatars.length>0?e.avatars[0]:null})).catch((function(e){return console.log('Failed to load profile="'.concat(t,'"'),e)}));case 4:return a=e.sent,e.abrupt("return",a||null);case 6:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(m.a)(b.a.mark((function e(t){var n,a,r,o,i,c,s,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.contractAddress,a=t.itemId,r=t.tokenId,o=t.peerUrl,i=t.nftServerUrl,a||r){e.next=3;break}throw new Error("You need to provide an itemId or a tokenId");case 3:if(c=j.get("NETWORK"),s="urn:decentraland:".concat(c,":collections-v2:").concat(n,":").concat(a),a||r){e.next=9;break}throw new Error("You must provide either tokenId or itemId");case 9:if(a||!r){e.next=14;break}return e.next=12,R.fetchNFT(n,r,i);case 12:u=e.sent,s=u.network!==l.Network.ETHEREUM?"urn:decentraland:".concat(c,":collections-v2:").concat(n,":").concat(u.itemId):u.image.split("contents/")[1].split("/thumbnail")[0];case 14:return e.abrupt("return",be(s,o));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t,n,a,r,o,i,c){return Le.apply(this,arguments)}function Le(){return(Le=Object(m.a)(b.a.mark((function e(t,n,a,r,o,i,s,u){var l,f,h,v,m,y,w,g,E,O,j,A,k,T,S,x,P,C,R,L,B,I,M,N;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ge(t,u),Oe([o].concat(Object(p.a)(n)),u),Ae(a)]);case 2:l=e.sent,f=Object(c.a)(l,3),h=f[0],v=Object(c.a)(f[1],2),m=v[0],y=v[1],w=Object(c.a)(f[2],2),g=w[0],E=w[1],O=me(r),j=Object(c.a)(O,2),A=j[0],k=j[1],T=[].concat(Object(p.a)(h),Object(p.a)(m),Object(p.a)(g),Object(p.a)(A)),S=[].concat(Object(p.a)(y),Object(p.a)(E),Object(p.a)(k)),T=T.filter((function(e){return ce(e,o)})),x=[],P=i&&s?Y():i?F():s?U():[],C=Object(d.a)(P),e.prev=18,C.s();case 20:if((R=C.n()).done){e.next=32;break}if(L=R.value,D(T,L)){e.next=30;break}if(!(B=V(L,o))){e.next=29;break}x.push(B),e.next=30;break;case 29:throw new Error('Could not get default URN for category="'.concat(L,'"'));case 30:e.next=20;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(18),C.e(e.t0);case 37:return e.prev=37,C.f(),e.finish(37);case 40:if(!(x.length>0)){e.next=47;break}return e.next=43,Oe(x,u);case 43:I=e.sent,M=Object(c.a)(I,1),N=M[0],T=[].concat(Object(p.a)(T),Object(p.a)(N));case 47:return e.abrupt("return",[T,S]);case 48:case"end":return e.stop()}}),e,null,[[18,34,37,40]])})))).apply(this,arguments)}function Be(){return Be=Object(m.a)(b.a.mark((function e(){var t,n,a,r,o,i,s,u,f,d,h,m,y,w,g,E,O,A,k,T,S,x,P,C,R,L,B,I,M,_,W,D,U,F,Y,V,z,Z,X,K,J,Q,ee,te,ne,ae,re=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=re.length>0&&void 0!==re[0]?re[0]:{},r=a.contractAddress,o=a.tokenId,i=a.itemId,s=a.peerUrl||j.get("PEER_URL"),u=a.nftServerUrl||j.get("NFT_SERVER_URL"),f=Promise.resolve(),r&&(f=Pe({contractAddress:r,tokenId:o,itemId:i,peerUrl:s,nftServerUrl:u})),d=we(a.profile),h=d?Se(d,s):Promise.resolve(null),e.next=10,Promise.all([f,h]);case 10:if(m=e.sent,y=Object(c.a)(m,2),w=y[0],g=y[1],E=a.bodyShape||g&&g.avatar.bodyShape||(w&&H(w)?G(w):l.BodyShape.MALE),O=q(a.skin||g&&$(g.avatar.skin.color)||"cc9b76"),A=q(a.hair||g&&$(g.avatar.hair.color)||"000000"),k=q(a.eyes||g&&$(g.avatar.eyes.color)||"000000"),T=Object(p.a)(a.urns||[]),S=a.urls||[],x=a.base64s||[],P=a.blob?Ne(a.blob):null,C=[],R=[],L=1.75,B=l.PreviewType.WEARABLE,I={color:"#4b4852",transparent:!0===a.disableBackground},!(T.length>0||S.length>0||x.length>0||w&&N(w)||a.profile)){e.next=37;break}return B=l.PreviewType.AVATAR,e.next=31,Re(g,T,S,x,E,!a.disableDefaultWearables&&!(null===g||void 0===g?void 0:g.avatar),!a.disableFace,s);case 31:M=e.sent,_=Object(c.a)(M,2),W=_[0],D=_[1],C=W,R=D;case 37:w&&(L=C.length>0?L:de(w),H(w)&&ue(ie(w))&&B!==l.PreviewType.AVATAR&&(B=l.PreviewType.TEXTURE),I=Object(v.a)(Object(v.a)({},I),{},{image:w.thumbnail}),Object(l.isStandard)(w)&&(U=l.Rarity.getColor(w.rarity),I=Object(v.a)(Object(v.a)({},I),{},{image:w.thumbnail,color:U}))),F=a.disableDefaultEmotes||N(w)?null:a.emote?a.emote:l.PreviewEmote.IDLE,a.emote&&Object.values(l.PreviewEmote).includes(a.emote)&&(F=a.emote),Y=l.PreviewCamera.INTERACTIVE,a.camera&&Object.values(l.PreviewCamera).includes(a.camera)&&(Y=a.camera),V=l.PreviewProjection.PERSPECTIVE,a.projection&&Object.values(l.PreviewProjection).includes(a.projection)&&(V=a.projection),z="number"!==typeof a.autoRotateSpeed||isNaN(a.autoRotateSpeed)?.2:a.autoRotateSpeed,Z=!a.disableAutoCenter,X=1,K=100,J=50,Ie(a.wheelZoom)&&(X=Math.max(a.wheelZoom,1)),Ie(a.wheelPrecision)&&(K=Math.max(a.wheelPrecision,1)),Ie(a.wheelStart)&&(J=100-Math.min(Math.max(a.wheelStart,0),100)),a.background&&(I.color=a.background),Q=0,ee=0,te=0,e.t0=B,e.next=e.t0===l.PreviewType.WEARABLE?59:e.t0===l.PreviewType.AVATAR?63:67;break;case 59:return Q=-2,ee=2,te=2,e.abrupt("break",67);case 63:return Q=0,ee=1,te=3.5,e.abrupt("break",67);case 67:return ye(a.cameraX)&&(Q=a.cameraX),ye(a.cameraY)&&(ee=a.cameraY),ye(a.cameraZ)&&(te=a.cameraZ),ne=null,(null===a||void 0===a?void 0:a.type)===l.PreviewType.WEARABLE&&C.length>=2&&(B=a.type,ne=C[1]),ae="number"!==typeof a.zoomScale||isNaN(a.zoomScale)||a.zoomScale<=0?1:a.zoomScale,e.abrupt("return",{item:null!==(t=null!==(n=null!==w&&void 0!==w?w:P)&&void 0!==n?n:ne)&&void 0!==t?t:R.pop(),wearables:C,bodyShape:E,forceRender:(null===g||void 0===g?void 0:g.avatar.forceRender)||[],skin:O,hair:A,eyes:k,type:B,background:I,face:!1!==a.disableFace,emote:F,camera:Y,projection:V,autoRotateSpeed:a.disableAutoRotate?0:z,centerBoundingBox:Z,offsetX:a.offsetX||0,offsetY:a.offsetY||0,offsetZ:a.offsetZ||0,cameraX:Q,cameraY:ee,cameraZ:te,zoom:("number"===typeof a.zoom?le(a.zoom):L)*ae,wheelZoom:X,wheelPrecision:K,wheelStart:J,fadeEffect:!a.disableFadeEffect,showSceneBoundaries:!!a.showSceneBoundaries,showThumbnailBoundaries:!!a.showThumbnailBoundaries,panning:!!a.panning,lockAlpha:!!a.lockAlpha,lockBeta:!!a.lockBeta,lockRadius:!!a.lockRadius});case 74:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function Ie(e){return"number"===typeof e&&!isNaN(e)}function Me(e){return Object(v.a)(Object(v.a)({},e),{},{contents:e.contents.map((function(e){return{key:e.key,url:URL.createObjectURL(e.blob)}}))})}function Ne(e){return"emoteDataADR74"in e?Object(v.a)(Object(v.a)({},e),{},{emoteDataADR74:Object(v.a)(Object(v.a)({},e.emoteDataADR74),{},{representations:e.emoteDataADR74.representations.map(Me)})}):Object(v.a)(Object(v.a)({},e),{},{data:Object(v.a)(Object(v.a)({},e.data),{},{representations:e.data.representations.map(Me)})})}var _e={};function We(e,t){return t===_e[e]}var De=n(351),Ue=n.n(De),Fe=function(e){var t=Object(a.useCallback)(e,[]);Object(a.useEffect)((function(){function e(e){t(e)}return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[t])},Ye=function(){var e=Object(a.useState)(window.location.search.toString()),t=Object(c.a)(e,1)[0],n=Object(a.useMemo)((function(){var e=new URLSearchParams(t),n=e.get("autoRotateSpeed"),a=e.get("offsetX"),r=e.get("offsetY"),o=e.get("offsetZ"),i=e.get("cameraX"),c=e.get("cameraY"),s=e.get("cameraZ"),u=e.get("zoomScale"),f=e.get("wheelZoom"),d=e.get("wheelPrecision"),p=e.get("wheelStart"),h=e.get("bodyShape"),b=e.get("panning"),v=e.get("lockAlpha"),m=e.get("lockBeta"),y=e.get("lockRadius"),w=e.has("transparentBackground");w&&console.warn('Deprecated: you are using the query param "transparentBackground" that has been deprecated in favor of "disableBackground". Please switch to the new query param since in the future this will not be supported.');var g="false"!==e.get("centerBoundingBox");return w&&console.warn('Deprecated: you are using the query param "transparentBackground" that has been deprecated in favor of "disableBackground". Please switch to the new query param since in the future this will not be supported.'),{contractAddress:e.get("contract"),tokenId:e.get("token"),itemId:e.get("item"),skin:e.get("skin"),hair:e.get("hair"),eyes:e.get("eyes"),emote:e.get("emote"),camera:e.get("camera"),projection:e.get("projection"),background:e.get("background"),autoRotateSpeed:n?parseFloat(n):null,offsetX:a?parseFloat(a):null,offsetY:r?parseFloat(r):null,offsetZ:o?parseFloat(o):null,cameraX:i?parseFloat(i):null,cameraY:c?parseFloat(c):null,cameraZ:s?parseFloat(s):null,wheelZoom:f?parseFloat(f):null,wheelPrecision:d?parseFloat(d):null,wheelStart:p?parseFloat(p):null,zoom:fe(e.get("zoom")),zoomScale:u?parseFloat(u):null,bodyShape:"female"===h||h===l.BodyShape.FEMALE?l.BodyShape.FEMALE:"male"===h||h===l.BodyShape.MALE?l.BodyShape.MALE:null,urns:e.getAll("urn"),urls:e.getAll("url"),base64s:e.getAll("base64"),profile:e.get("profile"),showSceneBoundaries:e.has("showSceneBoundaries")||!1,showThumbnailBoundaries:e.has("showThumbnailBoundaries")||!1,disableBackground:e.has("disableBackground")||w,disableAutoCenter:e.has("disableAutoCenter")||!g,disableAutoRotate:e.has("disableAutoRotate")||!g,disableFace:e.has("disableFace"),disableDefaultWearables:e.has("disableDefaultWearables"),disableDefaultEmotes:e.has("disableDefaultEmotes"),disableFadeEffect:e.has("disableFadeEffect"),peerUrl:e.get("peerUrl"),nftServerUrl:e.get("nftServerUrl"),type:e.get("type"),panning:"true"===b||null===b,lockAlpha:"true"===v,lockBeta:"true"===m,lockRadius:"true"===y}}),[t]),r=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],r=t[1];return Fe((function(e){if(e.data&&e.data.type===l.PreviewMessageType.UPDATE&&"object"===typeof e.data.payload&&"object"===typeof e.data.payload.options){var t=e.data.payload.options;Ue()(n,t)||r(t)}})),n}();return Object(a.useMemo)((function(){return Object(v.a)(Object(v.a)({},n),r)}),[n,r])};function Ve(){var e=Ye(),t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(a.useState)(!1),o=Object(c.a)(r,2),i=o[0],s=o[1],u=Object(a.useState)(null),l=Object(c.a)(u,2),f=l[0],d=l[1],p=Object(a.useState)(""),h=Object(c.a)(p,2),b=h[0],v=h[1];return"undefined"===typeof _e[e]&&(_e[e]=0),Object(a.useEffect)((function(){var n=++_e[e];s(!0),t().then((function(t){We(e,n)&&d(t)})).catch((function(t){We(e,n)&&v(t.message)})).finally((function(){We(e,n)&&s(!1)}))}),n),[f,i,b]}("useConfig",(function(){return function(){return Be.apply(this,arguments)}(e)}),[e]),n=Object(c.a)(t,3);return[n[0],n[1],n[2]]}function He(){return window.parent||window}function Ge(e,t){Object(l.sendMessage)(He(),l.PreviewMessageType.CONTROLLER_RESPONSE,{id:e,ok:!0,result:t})}function ze(e,t){Object(l.sendMessage)(He(),l.PreviewMessageType.CONTROLLER_RESPONSE,{id:e,ok:!1,error:t})}function Ze(e){return function(t){return t.data.category===e}}function Xe(e){return function(t){return t.wearable.data.category===e||(t.wearable.data.hides||[]).includes(e)||(t.wearable.data.replaces||[]).includes(e)}}function Ke(e){return!!e}function Je(e){return!ue(ie(e))}function qe(e){return!Je(e)}function Qe(e){var t=e.find((function(e){return e.wearable.data.category===l.WearableCategory.BODY_SHAPE}));if(!t)return null;var n,a=e.some((function(e){return e.wearable.data.category===l.WearableCategory.SKIN})),r=a||e.some(Xe(l.WearableCategory.UPPER_BODY)),o=a||e.some(Xe(l.WearableCategory.LOWER_BODY)),i=a||e.some(Xe(l.WearableCategory.FEET)),c=a||e.some(Xe(l.BodyPartCategory.HEAD)),s=a||e.some(Xe(l.BodyPartCategory.HANDS))||function(e){return e.some((function(e){var t,n,a=e.wearable.data.category===l.WearableCategory.UPPER_BODY,r=null===(t=e.wearable.data.hides)||void 0===t?void 0:t.includes(l.WearableCategory.UPPER_BODY),o=null===(n=e.wearable.data.removesDefaultHiding)||void 0===n?void 0:n.includes(l.BodyPartCategory.HANDS);return(a||r)&&!o}))}(e),u=Object(d.a)(t.container.meshes);try{for(u.s();!(n=u.n()).done;){var f=n.value,p=f.name.toLowerCase();p.endsWith("ubody_basemesh")&&r&&f.setEnabled(!1),p.endsWith("lbody_basemesh")&&o&&f.setEnabled(!1),p.endsWith("feet_basemesh")&&i&&f.setEnabled(!1),p.endsWith("head")&&c&&f.setEnabled(!1),p.endsWith("head_basemesh")&&c&&f.setEnabled(!1),p.endsWith("mask_eyes")&&c&&f.setEnabled(!1),p.endsWith("mask_eyebrows")&&c&&f.setEnabled(!1),p.endsWith("mask_mouth")&&c&&f.setEnabled(!1),p.endsWith("hands_basemesh")&&s&&f.setEnabled(!1)}}catch(h){u.e(h)}finally{u.f()}return t}var $e=[l.WearableCategory.HELMET,l.WearableCategory.HAIR,l.WearableCategory.FACIAL_HAIR,l.WearableCategory.MOUTH,l.WearableCategory.EYEBROWS,l.WearableCategory.EYES,l.WearableCategory.UPPER_BODY,l.WearableCategory.LOWER_BODY,l.WearableCategory.FEET,l.WearableCategory.HANDS_WEAR,l.BodyPartCategory.HANDS];function et(e){var t=new Map,n=Object(p.a)(e.wearables);if(e.item&&H(e.item)){n=[];var a,r=Object(d.a)(e.wearables);try{for(r.s();!(a=r.n()).done;){var o=a.value,i=e.item.data,c=i.category,s=i.hides,u=i.replaces;if("skin"===o.data.category){if($e.includes(c))continue;if(s&&s.includes(l.BodyPartCategory.HEAD))continue;if(u&&u.includes(l.BodyPartCategory.HEAD))continue}o.data.hides&&o.data.hides.includes(c)||(o.data.replaces&&o.data.replaces.includes(c)||n.push(o))}}catch(L){r.e(L)}finally{r.f()}n.push(e.item)}var f,h=Object(d.a)(n);try{for(h.s();!(f=h.n()).done;){var b=f.value,v=b.data.category;ce(b,e.bodyShape)&&t.set(v,b)}}catch(L){h.e(L)}finally{h.f()}var m=!1;n=n.filter((function(e){return t.get(e.data.category)===e})).reverse();var y,w=new Set,g=Object(d.a)(n);try{for(g.s();!(y=g.n()).done;){var E=y.value,O=E.data.category;if(!w.has(O)){var j,A=E.data.replaces||[],k=E.data.hides||[],T=Array.from(new Set([].concat(Object(p.a)(A),Object(p.a)(k)))).filter((function(t){var n;return!(null===(n=e.forceRender)||void 0===n?void 0:n.includes(t))})),S=Object(d.a)(T);try{for(S.s();!(j=S.n()).done;){var x=j.value;x!==O&&(t.delete(x),w.add(x))}}catch(L){S.e(L)}finally{S.f()}E.data.category===l.WearableCategory.SKIN&&(m=!0)}}}catch(L){g.e(L)}finally{g.f()}if(m){var P,C=Object(d.a)($e);try{for(C.s();!(P=C.n()).done;){var R=P.value;t.delete(R)}}catch(L){C.e(L)}finally{C.f()}}return t}function tt(e,t){e&&(e.useAutoRotationBehavior=!0,e.autoRotationBehavior&&(e.autoRotationBehavior.idleRotationSpeed=t.autoRotateSpeed))}var nt=n(259),at=(n(345),n(283));function rt(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)}var ot=["data:EnvironmentBRDFTexture0","GlowLayerBlurRTT","GlowLayerBlurRTT2","HighlightLayerMainRTT"];function it(e,t,n){function a(){return(a=Object(m.a)(b.a.mark((function t(a,r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J.Tools.CreateScreenshotUsingRenderTargetAsync(e,n,{width:a,height:r},void 0,void 0,!0));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(){return(r=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.inertialRadiusOffset=n.inertialRadiusOffset+t;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(m.a)(b.a.mark((function e(t){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.x,r=t.y,o=t.z,n.target.x=a||0,n.target.y=r||0,n.target.z=o||0;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(m.a)(b.a.mark((function e(t){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.alpha,r=t.beta,o=t.radius,a&&(n.alpha=n.alpha+a),r&&(n.beta=n.beta+r),o&&(n.radius=n.radius+o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(m.a)(b.a.mark((function e(){var n,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.meshes.filter((function(e){return!e.name.toLowerCase().includes("collider")})).reduce((function(e,t){return e+Math.floor(t.getTotalIndices()/3)}),0),a=t.materials.length,r=t.meshes.length,o=t.textures.filter((function(e){return e.name&&!ot.includes(e.name)})).length,e.abrupt("return",{triangles:n,materials:a,meshes:r,textures:o,bodies:r,entities:1});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{getScreenshot:function(e,t){return a.apply(this,arguments)},getMetrics:function(){return c.apply(this,arguments)},panCamera:function(e){return o.apply(this,arguments)},changeZoom:function(e){return r.apply(this,arguments)},changeCameraPosition:function(e){return i.apply(this,arguments)}}}var ct,st=Object({NODE_ENV:"production",PUBLIC_URL:"https://cdn.decentraland.org/@dcl/wearable-preview/1.26.1",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEBSITE_VERSION:"1.26.1"}).REACT_APP_DEBUG;function ut(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(m.a)(b.a.mark((function e(t,n){var a,r,o,i,c,s,u,f,d,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ct&&ct.dispose(),ct=new J.Engine(t,!0,{preserveDrawingBuffer:!0,stencil:!0,antialias:!0}),(a=new J.Scene(ct)).autoClear=!0,a.clearColor=n.background.transparent?new J.Color4(0,0,0,0):ee(n.background.color).toColor4(),a.ambientColor=new J.Color3(1,1,1),a.preventDefaultOnPointerDown=!1,n.showSceneBoundaries&&(r=J.MeshBuilder.CreateGround("ground",{width:6,height:6},a),(o=J.MeshBuilder.CreateGround("ground",{width:6,height:6},a)).rotate(J.Axis.Z,Math.PI),o.position.y=-.05,(i=new at.GridMaterial("groundMaterial",a)).mainColor=new J.Color3(1,1,1),i.lineColor=new J.Color3(0,0,0),i.majorUnitFrequency=0,r.material=i,o.material=i,c=J.MeshBuilder.CreateCylinder("boundaries",{diameter:2,height:3}),(s=new J.StandardMaterial("boundariesMaterial",a)).alpha=.3,s.diffuseColor=new J.Color3(1,45/255,85/255),c.material=s,c.position.y=1.51),n.showThumbnailBoundaries&&(u=nt.AdvancedDynamicTexture.CreateFullscreenUI("UI"),(f=new nt.Rectangle).width=.5,f.height=1,f.color="#736E7D",f.thickness=2,u.addControl(f)),(d=new J.ArcRotateCamera("camera",0,0,0,new J.Vector3(0,0,0),a)).position=new J.Vector3(n.cameraX,n.cameraY,n.cameraZ),d.minZ=.1,e.t0=n.projection,e.next=e.t0===l.PreviewProjection.PERSPECTIVE?15:e.t0===l.PreviewProjection.ORTHOGRAPHIC?17:23;break;case 15:return d.mode=J.Camera.PERSPECTIVE_CAMERA,e.abrupt("break",23);case 17:return d.mode=J.Camera.ORTHOGRAPHIC_CAMERA,d.orthoTop=1,d.orthoBottom=-1,d.orthoLeft=-1,d.orthoRight=1,e.abrupt("break",23);case 23:return n.type===l.PreviewType.WEARABLE&&tt(d,n),n.camera===l.PreviewCamera.INTERACTIVE&&d.attachControl(t,!0),p=new J.Vector3(n.offsetX,n.offsetY,n.offsetZ),d.position.addInPlace(p),d.setTarget(p),d.lowerRadiusLimit=d.radius/n.zoom,d.upperRadiusLimit=d.lowerRadiusLimit*n.wheelZoom,d.radius=d.lowerRadiusLimit+(d.upperRadiusLimit-d.lowerRadiusLimit)*n.wheelStart/100,d.wheelPrecision=n.wheelPrecision,n.panning||(d.panningSensibility=0),n.lockBeta&&(d.lowerBetaLimit=d.beta,d.upperBetaLimit=d.beta),n.lockAlpha&&(d.lowerAlphaLimit=d.alpha,d.upperAlphaLimit=d.alpha),n.lockRadius&&(d.lowerRadiusLimit=d.radius,d.upperRadiusLimit=d.radius),n.type===l.PreviewType.WEARABLE&&(new J.DirectionalLight("directional",new J.Vector3(0,0,1),a).intensity=1,new J.SpotLight("spot",new J.Vector3(-2,2,2),new J.Vector3(2,-2,-2),Math.PI/2,1e3,a).intensity=1),new J.HemisphericLight("top",new J.Vector3(0,-1,0),a).intensity=1,new J.HemisphericLight("bottom",new J.Vector3(0,1,0),a).intensity=1,rt()||(new J.GlowLayer("glow",a).intensity=2),ct.runRenderLoop((function(){a.render()})),st&&a.debugLayer.show({showExplorer:!0,embedMode:!0}),e.abrupt("return",[a,it(ct,a,d)]);case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e,t,n){return dt.apply(this,arguments)}function dt(){return(dt=Object(m.a)(b.a.mark((function e(t,n,a){var r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,o=oe(n,a),!(i=o.contents.find((function(e){return e.key.toLowerCase().endsWith("_mask.png")})))){e.next=5;break}return e.abrupt("return",new Promise((function(e,n){var a=new J.TextureAssetTask(r,i.url,!0,!1);a.onError=function(){return n(a.errorObject)},a.onSuccess=function(){e(a.texture)},a.run(t,(function(){return e(a.texture)}),n)})));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e,t,n){return ht.apply(this,arguments)}function ht(){return(ht=Object(m.a)(b.a.mark((function e(t,n,a){var r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,o=oe(n,a),!(i=o.contents.find((function(e){return e.key.toLowerCase().endsWith(".png")&&!e.key.toLowerCase().endsWith("_mask.png")})))){e.next=5;break}return e.abrupt("return",new Promise((function(e,n){var a=new J.TextureAssetTask(r,i.url,!0,!1);a.onError=function(){return n(a.errorObject)},a.onSuccess=function(){e(a.texture)},a.run(t,(function(){return e(a.texture)}),n)})));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){return vt.apply(this,arguments)}function vt(){return vt=Object(m.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(m.a)(b.a.mark((function e(n,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.SceneLoader.LoadAssetContainerAsync(n,"",t,null,a));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,a(n,".glb");case 4:case 11:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,a(n,".gltf");case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),vt.apply(this,arguments)}function mt(e){var t,n=new J.Mesh("parent",e),a=Object(d.a)(e.meshes);try{for(a.s();!(t=a.n()).done;){var r=t.value;r!==n&&r.setParent(n)}}catch(s){a.e(s)}finally{a.f()}!function(e){var t=e.getChildren().filter((function(e){return"__root__"!==e.id}));if(t.length>0){for(var n=t[0],a=n.getBoundingInfo(),r=a.boundingBox.minimumWorld.add(n.position),o=a.boundingBox.maximumWorld.add(n.position),i=1;i<t.length;i++){var c=t[i],s=(a=c.getBoundingInfo()).boundingBox.minimumWorld.add(c.position),u=a.boundingBox.maximumWorld.add(c.position);r=J.Vector3.Minimize(r,s),o=J.Vector3.Maximize(o,u)}e.setBoundingInfo(new J.BoundingInfo(r,o))}}(n);var o=n.getBoundingInfo().boundingBox.extendSize.length(),i=new J.Vector3(1/o,1/o,1/o);n.scaling=i;var c=n.getBoundingInfo().boundingBox.center.multiply(i);n.position.subtractInPlace(c)}st&&n(545);var yt,wt=[l.PreviewEmote.IDLE,l.PreviewEmote.MONEY,l.PreviewEmote.CLAP,l.PreviewEmote.WALK,l.PreviewEmote.RUN,l.PreviewEmote.JUMP];function gt(e){return wt.includes(e)}function Et(e){var t="https://cdn.decentraland.org/@dcl/wearable-preview/1.26.1";t.endsWith("/")||(t+="/");var n="./emotes/".concat(e,".glb");return t.startsWith("http")?new URL(n,t).href:n}function Ot(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(m.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt(t,n);case 2:if(0!==(a=e.sent).animationGroups.length){e.next=5;break}throw new Error("No animation groups found for emote with url=".concat(n));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e,t,n){return kt.apply(this,arguments)}function kt(){return(kt=Object(m.a)(b.a.mark((function e(t,n,a){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=re(n,a.bodyShape),o=r.contents.find((function(e){return e.key===r.mainFile}))){e.next=4;break}throw new Error("Could not find a valid content in representation for emote=".concat(n.id," and bodyShape=").concat(a.bodyShape));case 4:return e.abrupt("return",Ot(t,o.url));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e,t,n){return function(e,t){return new Promise((function(n,a){var r,o=null===(r=t.contents.find((function(e){return e.key.toLowerCase().endsWith(".mp3")||e.key.toLowerCase().endsWith("ogg")})))||void 0===r?void 0:r.url;if(!o)return n(null);var i=new J.BinaryFileAssetTask("Sound task",o);i.run(e,(function(){return n(new J.Sound("music",i.data,e,null,{spatialSound:!0}))}),(function(e){return a(e)}))}))}(e,re(t,n.bodyShape))}function St(e,t,n){return xt.apply(this,arguments)}function xt(){return(xt=Object(m.a)(b.a.mark((function e(t,n,a){var r,o,i,c,s,u,f,h,v,m,y,w,g,E,O,j,A,k,T,S,x,P,C,R;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){a.camera!==l.PreviewCamera.STATIC&&tt(t.cameras[0],a)},o=!!a.emote&&gt(a.emote),i=null,!a.item||!N(a.item)){e.next=17;break}return e.prev=4,e.next=7,At(t,a.item,a);case 7:return r=e.sent,o=a.item.emoteDataADR74.loop,e.next=11,Tt(t,a.item,a);case 11:i=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.warn("Could not load emote=".concat(a.item.id));case 17:if(r||!a.emote){e.next=22;break}return c=Et(a.emote),e.next=21,Ot(t,c);case 21:r=e.sent;case 22:r&&r.animationGroups.length>1&&(r.addAllToScene(),t.stopAllAnimations()),s=new J.AnimationGroup("emote",t),e.prev=24,f=Object(d.a)(n);try{for(f.s();!(h=f.n()).done;)if(m=h.value,y=[].concat(Object(p.a)(m.container.transformNodes),Object(p.a)((null===(v=r)||void 0===v?void 0:v.transformNodes)||[])).reduce((function(e,t){var n=e.get(t.id)||[];return n.push(t),r&&a.emote&&(t.position=new J.Vector3(0,0,0)),e.set(t.id,n)}),new Map),r&&r.animationGroups.length>0){w=Object(d.a)(r.animationGroups);try{for(w.s();!(g=w.n()).done;){E=g.value,O=Object(d.a)(E.targetedAnimations);try{for(O.s();!(j=O.n()).done;)if(A=j.value,k=A.animation,T=A.target,E.name.toLowerCase().includes("avatar")||1===r.animationGroups.length){if((S=y.get(T.id))&&S.length>0){x=Object(d.a)(S);try{for(x.s();!(P=x.n()).done;)C=P.value,s.addTargetedAnimation(k,C)}catch(b){x.e(b)}finally{x.f()}}}else s.addTargetedAnimation(k,T)}catch(b){O.e(b)}finally{O.f()}}}catch(b){w.e(b)}finally{w.f()}}}catch(b){f.e(b)}finally{f.f()}return s.onAnimationGroupEndObservable.addOnce(u),R=Pt(s,o,i),a.camera===l.PreviewCamera.STATIC&&R.stop(),e.abrupt("return",R);case 33:e.prev=33,e.t1=e.catch(24),console.warn("Could not play emote=".concat(a.emote),e.t1);case 36:case"end":return e.stop()}}),e,null,[[4,14],[24,33]])})))).apply(this,arguments)}function Pt(e,t,n){J.Engine.audioEngine.useCustomUnlockedButton=!0,J.Engine.audioEngine.setGlobalVolume(0);var a=void 0,r=!1;function o(){return i.apply(this,arguments)}function i(){return(i=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Math.max(e.to,0));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return(s=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.isPlaying);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(m.a)(b.a.mark((function t(n){var o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!0,t.next=3,c();case 3:(o=t.sent)&&e.pause(),e.stop(),e.start(!1,1,n,n,!1),a=n,r=!0,o&&d();case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return(p=Object(m.a)(b.a.mark((function r(){return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c();case 2:if(r.sent){r.next=17;break}if(!a){r.next=15;break}return r.t0=e,r.t1=t,r.t2=a,r.next=9,o();case 9:r.t3=r.sent,r.t0.start.call(r.t0,r.t1,1,r.t2,r.t3,!1),n&&(n.stop(),n._startOffset=a,n.play()),a=0,r.next=17;break;case 15:e.play(t),null===n||void 0===n||n.play();case 17:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function h(){return(h=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:if(!t.sent){t.next=5;break}e.pause(),null===n||void 0===n||n.pause();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.goToFrame(0),e.stop(),null===n||void 0===n||n.stop();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:J.Engine.audioEngine.unlock(),J.Engine.audioEngine.setGlobalVolume(1),e.isPlaying&&!n.isPlaying&&n.play(void 0,e.targetedAnimations[0].animation.runtimeAnimations[0].currentFrame);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:J.Engine.audioEngine.setGlobalVolume(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=Object(M.a)();return e.onAnimationGroupPlayObservable.add((function(){return yt&&clearInterval(yt),yt=window.setInterval(Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=e.animatables[0].masterFrame>0;case 5:if(!t.t0){t.next=7;break}return t.abrupt("return",E.emit(l.PreviewEmoteEventType.ANIMATION_PLAYING,{length:null===(n=e.animatables[0])||void 0===n?void 0:n.masterFrame}));case 7:case"end":return t.stop()}}),t)}))),10),E.emit(l.PreviewEmoteEventType.ANIMATION_PLAY)})),e.onAnimationGroupPauseObservable.add((function(){E.emit(l.PreviewEmoteEventType.ANIMATION_PAUSE)})),e.onAnimationGroupLoopObservable.add((function(){return null===n||void 0===n||n.stop(),null===n||void 0===n||n.play(),r&&(v(),d(),r=!1),E.emit(l.PreviewEmoteEventType.ANIMATION_LOOP)})),e.onAnimationGroupEndObservable.add((function(){return clearInterval(yt),r||E.emit(l.PreviewEmoteEventType.ANIMATION_PLAYING,{length:e.to}),t||(r=!1),E.emit(l.PreviewEmoteEventType.ANIMATION_END)})),{getLength:o,isPlaying:c,goTo:function(e){return f.apply(this,arguments)},play:d,pause:function(){return h.apply(this,arguments)},stop:v,enableSound:function(){return w.apply(this,arguments)},disableSound:function(){return g.apply(this,arguments)},hasSound:function(){return u.apply(this,arguments)},events:E}}function Ct(e,t,n){return function(){var a=Object(m.a)(b.a.mark((function a(r){var o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(o=t.find(Ze(r)))){a.next=3;break}return a.abrupt("return",Promise.all([pt(e,o,n),ft(e,o,n)]));case 3:return a.abrupt("return",[null,null]);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function Rt(e,t,n){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(m.a)(b.a.mark((function e(t,n,a){var r,o,i,s,u,f;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ct(t,n,a),e.next=3,Promise.all([r(l.WearableCategory.EYES),r(l.WearableCategory.EYEBROWS),r(l.WearableCategory.MOUTH)]);case 3:return o=e.sent,i=Object(c.a)(o,3),s=i[0],u=i[1],f=i[2],e.abrupt("return",{eyes:s,eyebrows:u,mouth:f});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e,t,n,a,r,o){return It.apply(this,arguments)}function It(){return(It=Object(m.a)(b.a.mark((function e(t,n,a,r,o,i){var s,u,l,f,p,h,v,m,y,w,g,E;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object(d.a)(n.container.meshes);try{for(s.s();!(u=s.n()).done;)(l=u.value).name.toLowerCase().endsWith("mask_eyes")&&(f=Object(c.a)(a,2),p=f[0],h=f[1],p?Mt(t,"eyes",l,p,i.eyes,h,"#ffffff"):l.setEnabled(!1)),l.name.toLowerCase().endsWith("mask_eyebrows")&&(v=Object(c.a)(r,2),m=v[0],y=v[1],m?Mt(t,"eyebrows",l,m,i.hair,y,i.hair):l.setEnabled(!1)),l.name.toLowerCase().endsWith("mask_mouth")&&(w=Object(c.a)(o,2),g=w[0],E=w[1],g?Mt(t,"mouth",l,g,i.skin,E,i.skin):l.setEnabled(!1))}catch(b){s.e(b)}finally{s.f()}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e,t,n,a,r,o,i){var c=new J.StandardMaterial("".concat(t,"_standard_material"),e);c.alphaMode=J.PBRMaterial.PBRMATERIAL_ALPHABLEND,c.backFaceCulling=!0,c.specularColor=J.Color3.Black(),a.hasAlpha=!0,c.sideOrientation=J.Orientation.CW,c.diffuseTexture=a,c.diffuseColor=o?J.Color3.Black():ee(i),o&&(c.emissiveTexture=o,c.diffuseColor=ee(r)),n.material=c}function Nt(e){var t=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.BodyShape.MALE,r={},o=Object(d.a)(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;try{var c,s=oe(i,a),u=Object(d.a)(s.contents);try{for(u.s();!(c=u.n()).done;){var f=c.value;r[f.key]=f.url}}catch(m){u.e(m)}finally{u.f()}}catch(y){console.warn('Skipping generation of mappings for wearable="'.concat(i.id,'" since it lacks a representation for bodyShape="').concat(a,'"'));continue}}}catch(m){o.e(m)}finally{o.f()}if(t){var p,h=re(t,a),b=Object(d.a)(h.contents);try{for(b.s();!(p=b.n()).done;){var v=p.value;r[v.key]=v.url}}catch(m){b.e(m)}finally{b.f()}}return r}(H(e.item)?[e.item].concat(Object(p.a)(e.wearables)):e.wearables,N(e.item)?e.item:void 0,e.bodyShape);J.SceneLoader.OnPluginActivatedObservable.add((function(e){"gltf"===e.name&&(e.preprocessUrlAsync=function(){var e=Object(m.a)(b.a.mark((function e(n){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/",a=n.split("/").pop()){e.next=4;break}return e.abrupt("return",n);case 4:return r=Object.keys(t),o=r.find((function(e){return e.endsWith(a)})),e.abrupt("return",t[o]||n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}var _t="#include<pbrBlockFinalColorComposition>",Wt="#include<customToonShading>";if(!J.Effect.ShadersStore.pbrPixelShader.includes(_t))throw new Error("could not patch the pbrPixelShader");function Dt(e,t){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(m.a)(b.a.mark((function e(t,n){var a,r,o,i,c,s,u,f,p,h,v,m,y,w,g,E,O=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O.length>2&&void 0!==O[2]?O[2]:l.BodyShape.MALE,r=O.length>3?O[3]:void 0,o=O.length>4?O[4]:void 0,!ue(i=oe(n,a))){e.next=6;break}throw new Error('The wearable="'.concat(n.id,'" is a texture'));case 6:return c=se(i),e.next=9,bt(t,c);case 9:s=e.sent,u=Object(d.a)(s.meshes);try{for(u.s();!(f=u.n()).done;)(p=f.value).name.toLowerCase().includes("collider")&&(p.isVisible=!1,t.removeMesh(p))}catch(b){u.e(b)}finally{u.f()}h=Object(d.a)(s.materials);try{for(h.s();!(v=h.n()).done;)(m=v.value)instanceof J.PBRMaterial&&((y=m).specularIntensity=0,y.metallic&&(y.metallic=0,y.metallicF0Factor=0),y.name.toLowerCase().includes("hair")&&(o?(y.albedoColor=J.Color3.FromHexString(o).toLinearSpace(),y.specularIntensity=0,y.alpha=1):(y.alpha=0,t.removeMaterial(y))),y.name.toLowerCase().includes("skin")&&(r?(y.albedoColor=J.Color3.FromHexString(r).toLinearSpace(),y.specularIntensity=0,y.alpha=1):(y.alpha=0,t.removeMaterial(y))))}catch(b){h.e(b)}finally{h.f()}w=Object(d.a)(s.animationGroups);try{for(w.s();!(g=w.n()).done;)(E=g.value).stop(),E.reset(),E.dispose()}catch(b){w.e(b)}finally{w.f()}return e.abrupt("return",{container:s,wearable:n});case 17:case"end":return e.stop()}}),e)}))),Ut.apply(this,arguments)}function Ft(){return(Ft=Object(m.a)(b.a.mark((function e(t,n){var a,r,o,i,s,u,f,p,h,v,m,y,w,g,E,O,j,A,k,T,S,x,P;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(t,n);case 2:if(a=e.sent,r=Object(c.a)(a,2),o=r[0],i=r[1],e.prev=6,Nt(n),u=[],n.type!==l.PreviewType.AVATAR){e.next=37;break}f=et(n),p=Array.from(f.values()),h=Object(d.a)(p.filter(Je));try{for(h.s();!(v=h.n()).done;)m=v.value,y=Dt(o,m,n.bodyShape,n.skin,n.hair).catch((function(e){console.warn(e.message)})),u.push(y)}catch(b){h.e(b)}finally{h.f()}return e.next=16,Promise.all(u);case 16:w=e.sent.filter(Ke),g=Object(d.a)(w);try{for(g.s();!(E=g.n()).done;)E.value.container.addAllToScene()}catch(b){g.e(b)}finally{g.f()}if(!(O=Qe(w))){e.next=29;break}return j=p.filter(qe),e.next=24,Rt(o,j,n.bodyShape);case 24:A=e.sent,k=A.eyes,T=A.eyebrows,S=A.mouth,Bt(o,O,k,T,S,n);case 29:return e.next=31,St(o,w,n);case 31:if(e.t0=e.sent,e.t0){e.next=34;break}e.t0=W();case 34:s=e.t0,e.next=53;break;case 37:if(!(x=n.item)||N(x)){e.next=52;break}return e.prev=39,e.next=42,Dt(o,x,n.bodyShape,n.skin,n.hair);case 42:e.sent.container.addAllToScene(),e.next=52;break;case 46:return e.prev=46,e.t1=e.catch(39),e.next=50,Dt(o,x,n.bodyShape===l.BodyShape.MALE?l.BodyShape.FEMALE:l.BodyShape.MALE,n.skin,n.hair);case 50:e.sent.container.addAllToScene();case 52:s=W();case 53:return n.centerBoundingBox&&mt(o),P={scene:i,emote:s},e.abrupt("return",P);case 58:throw e.prev=58,e.t2=e.catch(6),o.clearColor=new J.Color4(0,0,0,0),e.t2;case 62:case"end":return e.stop()}}),e,null,[[6,58],[39,46]])})))).apply(this,arguments)}J.Effect.ShadersStore.pbrPixelShader.includes(Wt)||(J.Effect.ShadersStore.pbrPixelShader=J.Effect.ShadersStore.pbrPixelShader.replace(_t,_t+"\n"+Wt+"\n")),J.Effect.IncludesShadersStore.customToonShading=n(546).default;n(547);var Yt=n(153),Vt=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(a.useState)({width:void 0,height:void 0}),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),i=o.width,s=o.height,f=Object(a.useState)({}),d=Object(c.a)(f,2),p=d[0],h=d[1],v=Object(a.useState)(!1),y=Object(c.a)(v,2),w=y[0],g=y[1],E=Object(a.useState)(!0),O=Object(c.a)(E,2),j=O[0],A=O[1],k=Object(a.useState)(!1),T=Object(c.a)(k,2),S=T[0],x=T[1],P=Object(a.useRef)(null),C=function(){var e=Object(a.useRef)();return Fe(function(){var t=Object(m.a)(b.a.mark((function t(n){var a,r,o,i,c,s,u,f;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.data||n.data.type!==l.PreviewMessageType.CONTROLLER_REQUEST||"object"!==typeof n.data.payload||"string"!==typeof n.data.payload.id||"string"!==typeof n.data.payload.namespace||"string"!==typeof n.data.payload.method||"object"!==typeof n.data.payload.params||!Array.isArray(n.data.payload.params)){t.next=26;break}if(a=n.data.payload,r=a.id,o=a.method,i=a.namespace,c=a.params,!e.current){t.next=25;break}if(!(i in e.current)){t.next=22;break}if(!(o in e.current[i])){t.next=19;break}return t.prev=5,s=e.current[i],u=s[o],t.next=10,u.apply(null,c);case 10:f=t.sent,Ge(r,f),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),ze(r,t.t0.message);case 17:t.next=20;break;case 19:ze(r,"Invalid method");case 20:t.next=23;break;case 22:ze(r,"Invalid namespace");case 23:t.next=26;break;case 25:ze(r,"Controller not ready");case 26:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e){return t.apply(this,arguments)}}()),e}(),R=Ve(),L=Object(c.a)(R,3),B=L[0],I=L[1],M=L[2],N=Object(a.useState)(""),_=Object(c.a)(N,2),W=_[0],D=_[1],U=Object(a.useState)(!0),F=Object(c.a)(U,2),Y=F[0],V=F[1],H=Object(a.useState)(!1),G=Object(c.a)(H,2),z=G[0],Z=G[1],X=n||M,K=(j||I)&&!X,J=!!W&&!Y&&!K,q=Y&&!K;return Object(a.useEffect)((function(){var e=function(){};if(P.current&&B){var t={opacity:1};B.background.image&&(D(B.background.image),t.opacity=1,B.background.transparent||B.type!==l.PreviewType.TEXTURE||(t.backgroundColor=B.background.color)),h(t),B.type===l.PreviewType.TEXTURE?(V(!1),A(!1),x(!0)):function(e,t){return Ft.apply(this,arguments)}(P.current,B).then((function(t){C.current=t,e=function(e){var t=function(){Object(l.sendMessage)(He(),l.PreviewMessageType.EMOTE_EVENT,{type:l.PreviewEmoteEventType.ANIMATION_PLAY,payload:void 0})},n=function(){Object(l.sendMessage)(He(),l.PreviewMessageType.EMOTE_EVENT,{type:l.PreviewEmoteEventType.ANIMATION_PAUSE,payload:void 0})},a=function(){Object(l.sendMessage)(He(),l.PreviewMessageType.EMOTE_EVENT,{type:l.PreviewEmoteEventType.ANIMATION_LOOP,payload:void 0})},r=function(){Object(l.sendMessage)(He(),l.PreviewMessageType.EMOTE_EVENT,{type:l.PreviewEmoteEventType.ANIMATION_END,payload:void 0})},o=function(e){Object(l.sendMessage)(He(),l.PreviewMessageType.EMOTE_EVENT,{type:l.PreviewEmoteEventType.ANIMATION_PLAYING,payload:e})};return e.emote.events.on(l.PreviewEmoteEventType.ANIMATION_PLAY,t),e.emote.events.on(l.PreviewEmoteEventType.ANIMATION_PAUSE,n),e.emote.events.on(l.PreviewEmoteEventType.ANIMATION_LOOP,a),e.emote.events.on(l.PreviewEmoteEventType.ANIMATION_END,r),e.emote.events.on(l.PreviewEmoteEventType.ANIMATION_PLAYING,o),function(){e.emote.events.off(l.PreviewEmoteEventType.ANIMATION_PLAY,t),e.emote.events.off(l.PreviewEmoteEventType.ANIMATION_PAUSE,n),e.emote.events.off(l.PreviewEmoteEventType.ANIMATION_LOOP,a),e.emote.events.off(l.PreviewEmoteEventType.ANIMATION_END,r),e.emote.events.off(l.PreviewEmoteEventType.ANIMATION_PLAYING,o)}}(C.current)})).catch((function(e){return r(e.message)})).finally((function(){A(!1),x(!0)}))}return function(){e()}}),[P.current,B]),Object(a.useEffect)((function(){var e;z||(S?(Object(l.sendMessage)(He(),l.PreviewMessageType.LOAD,null),Z(!0),((null===B||void 0===B?void 0:B.type)===l.PreviewType.AVATAR||(null===B||void 0===B?void 0:B.emote)&&B.emote!==l.PreviewEmote.IDLE)&&(null===(e=C.current)||void 0===e||e.emote.play())):X&&(Object(l.sendMessage)(He(),l.PreviewMessageType.ERROR,{message:X}),Z(!0)))}),[S,X,z,C,null===B||void 0===B?void 0:B.type,null===B||void 0===B?void 0:B.emote]),Object(a.useEffect)((function(){if(I){var e=!1;j||(A(!0),e=!0),z&&(Z(!1),e=!0),e&&S&&x(!1)}}),[I,j,z,S]),function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){n||(Object(l.sendMessage)(He(),l.PreviewMessageType.READY,null),r(!0))}),[n])}(),Object(Yt.jsxs)("div",{className:u()("Preview",{"is-dragging":w,"is-loading":K,"is-loaded":S,"is-3d":Y&&(null===B||void 0===B?void 0:B.camera)===l.PreviewCamera.INTERACTIVE,"has-error":!!X,"no-fade-effect":B&&!B.fadeEffect}),style:p,children:[Object(Yt.jsx)("img",{src:W,className:u()("thumbnail",{"is-visible":J}),alt:"preview"}),Object(Yt.jsx)("canvas",{id:"wearable-preview",className:u()({"is-visible":q}),width:i,height:s,ref:P,onMouseDown:function(){return g(Y&&!X)},onMouseUp:function(){return g(!1)}}),X&&Object(Yt.jsx)("div",{className:"error",children:X})]})},Ht=r.a.memo(Vt);i.a.render(Object(Yt.jsx)(r.a.StrictMode,{children:Object(Yt.jsx)(Ht,{})}),document.getElementById("root"))}},[[549,1,2]]]);
//# sourceMappingURL=main.3818792c.chunk.js.map